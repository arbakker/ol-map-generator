(function(e){function t(t){for(var r,_,s=t[0],i=t[1],l=t[2],u=0,d=[];u<s.length;u++)_=s[u],Object.prototype.hasOwnProperty.call(o,_)&&o[_]&&d.push(o[_][0]),o[_]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);c&&c(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=_(_.s=n[0]))}return e}var r={},o={app:0},a=[];function _(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,_),n.l=!0,n.exports}_.m=e,_.c=r,_.d=function(e,t,n){_.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},_.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},_.t=function(e,t){if(1&t&&(e=_(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(_.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)_.d(n,r,function(t){return e[t]}.bind(null,r));return n},_.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return _.d(t,"a",t),t},_.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},_.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"127e":function(e,t,n){"use strict";n("22a5")},1464:function(e,t,n){},2124:function(e,t,n){"use strict";n("6023")},"22a5":function(e,t,n){},5056:function(e){e.exports=JSON.parse('["aerialway","airfield","airport","alcohol-shop","american-football","amusement-park","animal-shelter","aquarium","arrow","art-gallery","attraction","bakery","bank-JP","bank","bar","barrier","baseball","basketball","bbq","beach","beer","bicycle-share","bicycle","blood-bank","bowling-alley","bridge","building-alt1","building","bus","cafe","campsite","car-rental","car-repair","car","casino","castle-JP","castle","caution","cemetery-JP","cemetery","charging-station","cinema","circle-stroked","circle","city","clothing-store","college-JP","college","commercial","communications-tower","confectionery","construction","convenience","cricket","cross","dam","danger","defibrillator","dentist","diamond","doctor","dog-park","drinking-water","elevator","embassy","emergency-phone","entrance-alt1","entrance","farm","fast-food","fence","ferry-JP","ferry","fire-station-JP","fire-station","fitness-centre","florist","fuel","furniture","gaming","garden-centre","garden","gift","globe","golf","grocery","hairdresser","harbor","hardware","heart","heliport","highway-rest-area","home","horse-riding","hospital-JP","hospital","hot-spring","ice-cream","industry","information","jewelry-store","karaoke","landmark-JP","landmark","landuse","laundry","library","lighthouse-JP","lighthouse","lodging","logging","marker-stroked","marker","mobile-phone","monument-JP","monument","mountain","museum","music","natural","observation-tower","optician","paint","park-alt1","park","parking-garage","parking","pharmacy","picnic-site","pitch","place-of-worship","playground","police-JP","police","post-JP","post","prison","racetrack-boat","racetrack-cycling","racetrack-horse","racetrack","rail-light","rail-metro","rail","ranger-station","recycling","religious-buddhist","religious-christian","religious-jewish","religious-muslim","religious-shinto","residential-community","restaurant-bbq","restaurant-noodle","restaurant-pizza","restaurant-seafood","restaurant-sushi","restaurant","road-accident","roadblock","rocket","school-JP","school","scooter","shelter","shoe","shop","skateboard","skiing","slaughterhouse","slipway","snowmobile","soccer","square-stroked","square","stadium","star-stroked","star","suitcase","swimming","table-tennis","teahouse","telephone","tennis","theatre","toilet","town-hall","town","triangle-stroked","triangle","veterinary","viewpoint","village","volcano","volleyball","warehouse","waste-basket","watch","water","waterfall","watermill","wetland","wheelchair","windmill","zoo"]')},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=n("ce5b"),a=n.n(o);n("bf40");r["default"].use(a.a);var _={},s=new a.a(_),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("map-control",{attrs:{config:e.config}})],1)},l=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-main",[n("div",{attrs:{id:"container"}},[n("div",{staticClass:"row"},[n("map-map-control",{ref:"mapMapControl",attrs:{config:e.config}})],1),n("div",{staticClass:"row form"},[n("v-container",{staticClass:"px-0",attrs:{fluid:""}},[n("v-text-field",{attrs:{label:"Map Title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("v-checkbox",{attrs:{label:"Disable Pan Outside Current Extent"},model:{value:e.constrainBoundsEnabled,callback:function(t){e.constrainBoundsEnabled=t},expression:"constrainBoundsEnabled"}}),n("v-checkbox",{attrs:{label:"Locatie Server Control Enabled"},model:{value:e.lsControlEnabled,callback:function(t){e.lsControlEnabled=t},expression:"lsControlEnabled"}}),n("v-switch",{attrs:{label:"Order Layers"},model:{value:e.orderLayersEnabled,callback:function(t){e.orderLayersEnabled=t},expression:"orderLayersEnabled"}}),n("v-expansion-panels",{attrs:{disabled:e.orderLayersEnabled}},[n("draggable",{attrs:{disabled:!e.orderLayersEnabled},model:{value:e.layers,callback:function(t){e.layers=t},expression:"layers"}},[n("transition-group",e._l(e.layers,(function(e){return n("layer-list-item",{key:e.id,attrs:{layer:e}})})),1)],1)],1),n("v-btn",{attrs:{elevation:"2",large:""},on:{click:function(t){return e.updateMap()}}},[e._v("Update Map")]),n("v-btn",{attrs:{elevation:"2",large:""},on:{click:function(t){return e.generateHTML()}}},[e._v("Generate HTML")])],1)],1)])])],1)},u=[],d=(n("d81d"),n("b76a")),p=n.n(d),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"expansion-panel-wrapper"},["serviceLayer"===e.layer.layerType?n("service-layer-list-item",{attrs:{layer:e.layer}}):e._e(),"featureLayer"===e.layer.layerType?n("feature-layer-list-item",{attrs:{layer:e.layer}}):e._e()],1)},g=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(" "+e._s(e.title)+" ")]),n("v-expansion-panel-content",[n("v-text-field",{attrs:{label:"Layer Title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("v-text-field",{attrs:{label:"Service Url"},model:{value:e.serviceUrl,callback:function(t){e.serviceUrl=t},expression:"serviceUrl"}}),n("v-text-field",{attrs:{label:"Layer Name"},model:{value:e.layerName,callback:function(t){e.layerName=t},expression:"layerName"}}),n("v-slider",{attrs:{step:"0.01",min:"0",max:"1","thumb-label":"",label:"Opacity"},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}}),n("v-slider",{attrs:{step:"0.01",min:"0",max:"1","thumb-label":"",label:"Grayscale"},model:{value:e.grayscale,callback:function(t){e.grayscale=t},expression:"grayscale"}})],1)],1)},b=[],y=(n("e9c4"),{components:{},name:"ServiceLayerListItem",props:{layer:Object},data:function(){return{}},computed:{title:{get:function(){return this.layer.title},set:function(e){this.layer.title=e}},serviceUrl:{get:function(){return this.layer.serviceUrl},set:function(e){this.layer.serviceUrl=e}},layerName:{get:function(){return this.layer.layerName},set:function(e){this.layer.layerName=e}},opacity:{get:function(){return this.layer.opacity},set:function(e){this.layer.opacity=e}},grayscale:{get:function(){return this.layer.grayscale},set:function(e){this.layer.grayscale=e}}},mounted:function(){},beforeMount:function(){"opacity"in this.layer||(this.layer.opacity=1),"grayscale"in this.layer||(this.layer.grayscale=0)},methods:{click:function(){console.log(JSON.stringify(this.layer,null,4))}}}),h=y,E=(n("f184"),n("2877")),v=Object(E["a"])(h,f,b,!1,null,"2d4c98ab",null),O=v.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(" "+e._s(e.layer.title)+" ")]),n("v-expansion-panel-content",[n("v-text-field",{attrs:{label:"Layer Title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("v-radio-group",{model:{value:e.sourceIsUrl,callback:function(t){e.sourceIsUrl=t},expression:"sourceIsUrl"}},[n("v-radio",{attrs:{label:"GeoJSON URL",value:"url"}}),n("v-radio",{attrs:{label:"GeoJSON Document",value:"document"}})],1),"url"===e.sourceIsUrl?n("v-text-field",{attrs:{label:"GeoJSON URL"},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}}):e._e(),"document"===e.sourceIsUrl?n("v-textarea",{attrs:{label:"GeoJSON Document",hint:"Hint text"},model:{value:e.sourceDocument,callback:function(t){e.sourceDocument=t},expression:"sourceDocument"}}):e._e(),n("v-slider",{attrs:{step:"0.01",min:"0",max:"1","thumb-label":"",label:"Opacity"},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}}),n("v-slider",{attrs:{step:"0.01",min:"0",max:"1","thumb-label":"",label:"Grayscale"},model:{value:e.grayscale,callback:function(t){e.grayscale=t},expression:"grayscale"}}),n("v-color-picker",{attrs:{label:"Style Color","dot-size":"20",mode:"rgba","hide-inputs":""},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}}),n("v-checkbox",{attrs:{label:"Enable Labels"},model:{value:e.labels,callback:function(t){e.labels=t},expression:"labels"}}),n("v-text-field",{attrs:{disabled:!e.labels,label:"Label Property"},model:{value:e.labelProperty,callback:function(t){e.labelProperty=t},expression:"labelProperty"}}),e.isStrokeFeatureLayer?n("v-slider",{attrs:{step:"1",min:"0",max:"20","thumb-label":"",label:"Stroke Width"},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}}):e._e(),e.isStrokeFeatureLayer?n("v-text-field",{attrs:{rules:e.strokeRules},model:{value:e.stroke,callback:function(t){e.stroke=t},expression:"stroke"}}):e._e(),e.isStrokeFeatureLayer?e._e():n("v-slider",{attrs:{step:"1",min:"0",max:"20","thumb-label":"",label:"Icon Size"},model:{value:e.iconSize,callback:function(t){e.iconSize=t},expression:"iconSize"}}),e.isStrokeFeatureLayer?e._e():n("v-select",{attrs:{items:e.icons,label:"Icon"},model:{value:e.icon,callback:function(t){e.icon=t},expression:"icon"}})],1)],1)},M=[],D=(n("ac1f"),n("00b4"),n("a15b"),n("1276"),n("498a"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("5056")),w={components:{},name:"FeatureLayerListItem",props:{layer:Object},data:function(){return{icons:D,strokeRules:[function(e){var t=/^^([0-9]+\s?,?){2,}$$/;return t.test(e)||"Invalid stroke, comma seperated integers required"}]}},computed:{source:{get:function(){return this.layer.source},set:function(e){this.layer.source=e}},labels:{get:function(){return this.layer.labels},set:function(e){this.layer.labels=e}},labelProperty:{get:function(){return this.layer.labelProperty},set:function(e){this.layer.labelProperty=e}},iconSize:{get:function(){return this.layer.iconSize},set:function(e){this.layer.iconSize=e}},icon:{get:function(){return this.layer.icon},set:function(e){this.layer.icon=e}},title:{get:function(){return this.layer.title},set:function(e){this.layer.title=e}},width:{get:function(){return this.layer.width},set:function(e){this.layer.width=e}},opacity:{get:function(){return this.layer.opacity},set:function(e){this.layer.opacity=e}},grayscale:{get:function(){return this.layer.grayscale},set:function(e){this.layer.grayscale=e}},stroke:{get:function(){return this.layer.stroke?this.layer.stroke.join(","):""},set:function(e){this.layer.stroke=e.split(",").map((function(e){return parseInt(e.trim())}))}},color:{get:function(){var e={r:this.layer.color[0],g:this.layer.color[1],b:this.layer.color[2],a:1};return e},set:function(e){this.layer.color=[e.r,e.g,e.b]}},isStrokeFeatureLayer:function(){if("url"!==this.sourceIsUrl){var e=this.source.features[0].geometry.type;if(e=e.replace("Multi",""),"Point"===e)return!1}return!0},sourceDocument:function(){return JSON.stringify(this.source)},sourceIsUrl:function(){var e;try{e=new URL(this.source)}catch(t){return"document"}return"http:"===e.protocol||"https:"===e.protocol?"url":"document"}},mounted:function(){},beforeMount:function(){"opacity"in this.layer||(this.layer.opacity=1),"grayscale"in this.layer||(this.layer.grayscale=0)},watch:{"actLayer.visible":{handler:function(e,t){console.log(e,t)}}},methods:{}},k=w,L=(n("9635"),Object(E["a"])(k,P,M,!1,null,"39c9b1cd",null)),x=L.exports,j={components:{ServiceLayerListItem:O,FeatureLayerListItem:x},name:"LayerListItem",props:{layer:Object},computed:{},mounted:function(){},beforeMount:function(){},methods:{}},T=j,C=(n("bca3"),Object(E["a"])(T,m,g,!1,null,"6b4b50dc",null)),I=C.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"map-root",attrs:{id:"map"}}),n("h1",{attrs:{id:"mapTitle"}},[e._v(e._s(e.config.title))])])},R=[],A=n("9678"),U=A["a"],W=(n("127e"),Object(E["a"])(U,S,R,!1,null,"e871ea2e",null)),B=W.exports,K=n("db98"),q=n("8081"),F={components:{draggable:p.a,LayerListItem:I,MapMapControl:B},name:"MapControl",props:{config:Object},data:function(){return{jsTemplate:q["a"],htmlTemplate:K["a"],orderLayersEnabled:!1}},mounted:function(){},beforeMount:function(){},computed:{title:{get:function(){return this.config.title},set:function(e){this.config.title=e}},layers:{get:function(){return this.config.layers},set:function(e){console.log("AAAAA"),e.map((function(e){return console.log(e.title)})),this.config.layers=e}},constrainBoundsEnabled:{get:function(){return this.config.constrainBoundsEnabled},set:function(e){this.config.constrainBoundsEnabled=e}},lsControlEnabled:{get:function(){return this.config.lsControlEnabled},set:function(e){this.config.lsControlEnabled=e}}},methods:{updateMap:function(){this.$refs.mapMapControl.updateMap()},generateHTML:function(){this.$refs.mapMapControl.generateCode()},action:function(e){"edit"===e&&(this.before=Object.assign([],this.layers)),"undo"===e&&(this.layers=this.before),this.editing=!this.editing}}},J=F,z=(n("2124"),Object(E["a"])(J,c,u,!1,null,"5272152a",null)),G=z.exports,V=n("9429"),H={name:"App",data:function(){return{config:V}},mounted:function(){},components:{MapControl:G}},N=H,$=(n("034f"),Object(E["a"])(N,i,l,!1,null,null,null)),Y=$.exports;new r["default"]({vuetify:s,render:function(e){return e(Y)}}).$mount("#app")},"5dff":function(e,t,n){},6023:function(e,t,n){},8081:function(e,t,n){"use strict";t["a"]='import { default as ImageLayer } from \'https://esm.run/ol@6.9.0/src/layer/Image\';\nimport { default as ImageWMS } from \'https://esm.run/ol@6.9.0/src/source/ImageWMS\';\nimport { default as TileLayer } from \'https://esm.run/ol@6.9.0/src/layer/Tile\';\nimport { default as WMTS } from \'https://esm.run/ol@6.9.0/src/source/WMTS\';\nimport { default as WMTSTileGrid } from \'https://esm.run/ol@6.9.0/src/tilegrid/WMTS\';\nimport { get as getProjection } from \'https://esm.run/ol@6.9.0/src/proj\';\nimport { getTopLeft, getWidth } from \'https://esm.run/ol@6.9.0/src/extent\';\nimport { Circle as CircleStyle, Fill, Stroke, Style, Text, Icon } from \'https://esm.run/ol@6.9.0/src/style\';\nimport { default as Map } from \'https://esm.run/ol@6.9.0/src/Map\';\nimport GeoJSON from \'https://esm.run/ol@6.9.0/src/format/GeoJSON\';\nimport { default as VectorSource } from \'https://esm.run/ol@6.9.0/src/source/Vector\';\nimport { default as VectorLayer } from \'https://esm.run/ol@6.9.0/src/layer/Vector\';\nimport \'https://esm.run/mustache@4.2.0/mustache.js\';\n\nlet config={{{ config }}}\n\nvar map\nmap = new Map({\n    target: "map"\n})\n\n{{#lsControlEnabled}}\n /* LocatieServer Control code */\n import WKT from \'https://esm.run/ol@6.9.0/src/format/WKT\'\n import { Control } from  \'https://esm.run/ol@6.9.0/src/control\'\n class LocatieServerControl extends HTMLElement {\n     constructor () {\n       super()\n       const _style = document.createElement(\'style\')\n       const _template = document.createElement(\'template\')\n       this.LS_STYLE = `\n       button{\n           border: solid 1px #cfd6e6;\n           border-radius: 0 3px 3px 0;\n           border-left: 0px;\n           width: 3em;\n       }\n       .parentControl{\n           background-color: white;\n           height: 36px;\n       }\n       input{\n           outline: none;\n       }\n       input[type=text]{\n           border: solid 1px #cfd6e6;\n           border-radius: 3px;\n           width: 21em;\n           padding-left: 0.5em;\n       }\n       \n       select{\n           border: solid 1px #cfd6e6;\n           border-radius: 3px;\n           width: 10em;\n           padding-left: 0.5em;    \n       }\n       \n       input[type=checkbox] {\n           transform: scale(1.1);\n       }\n       \n       input:focus{\n           border: solid 2px #cfd6e6 !important;\n       }`\n       this.query = \'\'\n       _style.innerHTML = `\n           ${this.LS_STYLE}\n           #locationServerControl{\n               display: flex;\n               position: absolute;\n               bottom: 2em;\n               right: 2em;\n           }\n           @media only screen and (max-width: 1024px) {\n             #locationServerControl{\n               bottom: 3em;\n               left: 0.5em;\n             }\n           }\n         `\n       _template.innerHTML = `\n           <div id="locationServerControl" class="parentControl">\n               <input autoComplete="off" id="lsInput" class="control" type="text" placeholder="zoek in locatieserver" title="Zoek in PDOK Locatieserver" list="locatie-auto-complete">\n               <datalist id="locatie-auto-complete"></datalist>\n           </div>\n       `\n       this.LOCATIE_SERVER_URL = \'https://geodata.nationaalgeoregister.nl/locatieserver/v3\'\n      \n       this.shadow = this.attachShadow({ mode: \'open\' })\n       this.shadow.appendChild(_style)\n       this.shadow.appendChild(_template.content.cloneNode(true))\n   \n       this.shadow.getElementById(\'lsInput\').addEventListener(\'input\', (event) => {\n        \n\n         if (event.inputType === \'insertReplacementText\' || event.inputType === undefined) {\n           const options = this.shadow.getElementById(\'locatie-auto-complete\').querySelectorAll(\'option\')\n           let id = \'\'\n           for (let option of options) {\n             if (option.value === event.target.value) {\n               id = option.id\n             }\n           }\n           fetch(`${this.LOCATIE_SERVER_URL}/lookup?id=${id}&fl=id,geometrie_ll`)\n             .then((response) => {\n               return response.json()\n             })\n             .then((data) => {\n               const wktLoc = data.response.docs[0].geometrie_ll\n               const format = new WKT()\n               const feature = format.readFeature(wktLoc, {\n                 dataProjection: \'EPSG:4326\',\n                 featureProjection: \'EPSG:3857\'\n               })\n               const ext = feature.getGeometry().getExtent()\n               this.dispatchEvent(new CustomEvent(\'location-selected\', { bubbles: true, composed: true, detail: { extent: ext, feature: feature } }))\n               this.shadow.getElementById(\'locatie-auto-complete\').innerHTML = \'\'\n               this.shadow.getElementById(\'lsInput\').blur()\n             })\n         }else if (event.inputType.startsWith(\'deleteContent\')){\n            if ( event.target.value===""){\n                this.dispatchEvent(new CustomEvent(\'location-cleared\', { bubbles: true, composed: true, detail: { } }))\n            }\n         } \n       })\n   \n       this.shadow.getElementById(\'lsInput\').addEventListener(\'keyup\', (e) => {\n         if (this.query === e.target.value) {\n           return\n         }\n         this.query = e.target.value\n         fetch(`${this.LOCATIE_SERVER_URL}/suggest?q=${this.query}`)\n           .then((response) => {\n             return response.json()\n           })\n           .then((data) => {\n             if (data.response.docs.length > 0) {\n               let options = data.response.docs.map(x => `<option value="${x.weergavenaam}" id="${x.id}">`)\n               let optionsHtml = options.join(\'\')\n               this.shadow.getElementById(\'locatie-auto-complete\').innerHTML = optionsHtml\n             }\n           })\n       })\n     }\n     connectedCallback () {\n       this.shadow.addEventListener(\'keydown\', (event) => {\n         event.stopPropagation()\n       })\n     }\n   }\n if (!customElements.get(\'locatieserver-control\')){\n    customElements.define(\'locatieserver-control\', LocatieServerControl)\n }\n\n const lsControl = document.createElement(\'locatieserver-control\')\n const LS_LAYER_ID = \'lsControlLayer\'\nfunction removeLsLayer(){\n    let existingLsLayer = map.getLayers().getArray().find(x=> {\n        return  \'values_\' in x && x.values_.id === LS_LAYER_ID\n    })\n    if (existingLsLayer){\n        map.removeLayer(existingLsLayer)\n    }\n}\n\n function locationSelectedHandler (event) {\n    let style = polygonStyle({color: [255, 255, 0], stroke: "solid", width: 4 })\n    let ftLayer = new VectorLayer({\n        id: LS_LAYER_ID,\n        declutter: true,\n        source: new VectorSource({\n            features: [event.detail.feature]\n        }),\n        style: new Style(style),\n        opacity: 0.4\n    })\n    removeLsLayer()\n    map.addLayer(ftLayer)\n    map.getView().fit(event.detail.extent, { maxZoom: 18, padding: [30,30,30,30] })\n }\n\n function locationClearedHandler () {\n    removeLsLayer()\n }\n\n function enableLsControl () {\n     let myControl = new Control({ element: lsControl })\n     map.addControl(myControl)\n     lsControl.addEventListener(\'location-selected\', locationSelectedHandler, false)\n     lsControl.addEventListener(\'location-cleared\', locationClearedHandler, false)\n }\n /* LocatieServer Control code */\n {{/lsControlEnabled}}\n\n\n\nfunction lineStyle(config) {\n    let colorString = `rgb(${config.color[0]},${config.color[1]},${config.color[2]})`;\n    let dash = getDash(config);\n    return {\n    stroke: new Stroke({\n        ...{\n        color: colorString,\n        width: config.width,\n        },\n        ...dash,\n    }),\n    };\n}\n\nfunction pointStyle(config) {\n    // replace 2nd occurence in SVG - first path occurence is for white bg halo - https://stackoverflow.com/a/44568739\n    // TOOD: maybe move to generator code\n    let scale = 1.5;\n    if ("iconSize" in config) {\n    scale = config.iconSize;\n    }\n    let i = 0;\n    let icon = config.svgIcon.replace(/<path/g, (match) =>\n    ++i === 2 ? `<path fill="#${config.hexColor}"` : match\n    );\n    const src = "data:image/svg+xml;utf8," + escape(icon);\n    return {\n    image: new Icon({\n        opacity: 1,\n        src: src,\n        scale: scale,\n    }),\n    };\n}\n\nfunction getDash(config) {\n    const dashDic = {\n    dashed: {\n        lineDash: [4],\n    },\n    solid: {},\n    dotted: {\n        lineDash: [1, 4, 1, 4],\n    },\n    "dash-dotted": {\n        lineDash: [9, 3, 3, 3],\n    },\n    };\n    let dash;\n    if (!Array.isArray(config.stroke)) {\n    dash =\n        config.stroke in dashDic\n        ? dashDic[config.stroke]\n        : dashDic["solid"];\n    } else {\n    dash = {\n        lineDash: config.stroke,\n    };\n    }\n    return dash;\n}\n\nfunction polygonStyle(config) {\n    // TODO: fix default colors in generator code\n    let colorString = `rgb(${config.color[0]},${config.color[1]},${config.color[2]})`;\n    let fillColor = `rgba(${config.color[0]},${config.color[1]},${config.color[2]},0.2)`;\n    if (!("stroke" in config)) {\n    config.stroke = "dashed";\n    }\n    if (!("width" in config)) {\n    config.width = 2;\n    }\n    let dash = getDash(config);\n    return {\n    stroke: new Stroke({\n        ...{\n        color: colorString,\n        width: config.width,\n        },\n        ...dash,\n    }),\n    fill: new Fill({\n        color: fillColor,\n    }),\n    };\n}\n\nfunction getStyle(config) {\n    const styles = {\n    Point: pointStyle,\n    LineString: lineStyle,\n    Polygon: polygonStyle,\n    };\n    let style = styles[config.geomType];\n    if (\n    typeof config.color === "string" &&\n    config.color.split(",").length > 2\n    ) {\n    config.color = config.color.split(",");\n    }\n    return style(config);\n}\n\nfunction getStyleFunction(config) {\n    // eslint-disable-next-line no-unused-vars\n    return function (feature, resolution) {\n    let symbolStyle = getStyle(config);\n    if ("labels" in config && config.labels) {\n        const placementDic = {\n        Point: {\n            offsetX: 7,\n            offsetY: -7,\n            textAlign: "start",\n            overflow: true,\n        },\n        Polygon: {\n            textAlign: "center",\n            overflow: true,\n        },\n        LineString: {\n            offsetX: 6,\n            offsetY: -6,\n            textAlign: "start",\n        },\n        };\n        let textStyle = {\n        text: new Text({\n            ...{\n            text: feature.get(config.labelProperty),\n            scale: 1.3,\n            fill: new Fill({\n                color: "#000000",\n            }),\n            stroke: new Stroke({\n                color: "rgba(255, 255, 255, 0.8)",\n                width: 3,\n            }),\n            },\n            ...placementDic[config.geomType],\n        }),\n        };\n        return new Style({\n        ...textStyle,\n        ...symbolStyle,\n        });\n    }\n    return new Style(symbolStyle);\n    };\n}\n\nfunction isValidHttpUrl(string) {\n    let url;\n    try {\n    url = new URL(string);\n    } catch (_) {\n    return false;\n    }\n\n    return url.protocol === "http:" || url.protocol === "https:";\n}\n\nconst projection = getProjection("EPSG:3857");\nconst projectionExtent = projection.getExtent();\nconst size = getWidth(projectionExtent) / 256;\nconst resolutions = new Array(19);\nconst matrixIds = new Array(19);\nfor (let z = 0; z < 19; ++z) {\n    // generate resolutions and matrixIds arrays for this WMTS\n    resolutions[z] = size / Math.pow(2, z);\n    matrixIds[z] = z;\n}\n\nasync function getResourceText(filename) {\n    let response = await fetch(filename);\n    if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.text();\n}\n// eslint-disable-next-line no-unused-vars\nasync function getFeatureData(config) {\n    if (config.layerType === "featureLayer") {\n    let ftCollection;\n    if (isValidHttpUrl(config.source)) {\n        let ftCollectionString = await getResourceText(config.source);\n        ftCollection = JSON.parse(ftCollectionString);\n    } else {\n        ftCollection = config.source;\n    }\n    return { ftCollection: ftCollection, config: config };\n    } else {\n    // optionally retrieve metadata from service\n    return { serviceUrl: config.serviceUrl, config: config };\n    }\n}\n\nfunction postRender(evt) {\n    let grayscale = evt.target.get("grayscale");\n    evt.context.globalCompositeOperation = "color";\n    if (evt.context.globalCompositeOperation === "color") {\n    // operation is supported by browser\n    evt.context.fillStyle = "rgba(255,255,255," + grayscale + ")";\n    evt.context.fillRect(\n        0,\n        0,\n        evt.context.canvas.width,\n        evt.context.canvas.height\n    );\n    }\n    evt.context.globalCompositeOperation = "source-over";\n}\n\nconst promises = [];\n\n{{ #layersString}}\npromises.push(\n    getFeatureData(\n        {{{.}}}\n    )\n)\n{{/layersString}};\n\nconst layers = [];\n// resolve promises with all to maintain layer order\nPromise.all(promises).then((values) => {\n    values.forEach((result) => {\n    if (result.config.layerType === "featureLayer") {\n        layers.push(\n        new VectorLayer({\n            declutter: true,\n            source: new VectorSource({\n            features: new GeoJSON({\n                featureProjection: "EPSG:3857",\n            }).readFeatures(result.ftCollection),\n            }),\n            style: getStyleFunction(result.config),\n            opacity: result.config.opacity,\n        })\n        );\n    } else if (result.config.layerType === "serviceLayer") {\n        if (result.config.serviceType === "WMS") {\n        layers.push(\n            new ImageLayer({\n            source: new ImageWMS({\n                url: result.config.serviceUrl,\n                params: { LAYERS: result.config.layerName }, // TODO: add style parameter\n                ratio: 1,\n            }),\n            ...("grayscale" in result.config && {\n                grayscale: result.config.grayscale,\n            }), // add property conditionally\n            ...("opacity" in result.config && {\n                opacity: result.config.opacity,\n            }),\n            })\n        );\n        } else if (result.config.serviceType === "WMTS") {\n        layers.push(\n            new TileLayer({\n            source: new WMTS({\n                url: result.config.serviceUrl,\n                layer: result.config.layerName,\n                matrixSet: "EPSG:3857",\n                format: "image/png",\n                projection: projection,\n                tileGrid: new WMTSTileGrid({\n                origin: getTopLeft(projectionExtent),\n                resolutions: resolutions,\n                matrixIds: matrixIds,\n                }),\n                style: "default",\n                wrapX: true,\n            }),\n            ...("grayscale" in result.config && {\n                grayscale: result.config.grayscale,\n            }), // add property conditionally\n            ...("opacity" in result.config && {\n                opacity: result.config.opacity,\n            }),\n            })\n        );\n        }\n    }\n    });\n    map.setLayers(layers);\n    map.getLayers().forEach((lyr) => {\n    let grayscale = lyr.get("grayscale");\n    if (grayscale > 0) {\n        lyr.on("postrender", postRender);\n    }\n    });\n    map.render()\n    // TODO: improve; assuming this executes after end of this function, might be race condition\n    if (config.generator){\n        this.map = map\n        this.map.on(\'moveend\', () => {\n            this.updateMapState()\n        })\n    }\n});\n// promise returning viewOptions is expected instead of View object https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html#setView\nlet viewConfig = \n{{#location}}\n{\n    "center": [{{ x }}, {{ y }}],\n    "zoom": {{ z }}\n}\n{{/location}}\n{{^location }}\n{\n    "center": [564457.4160, 6783258.6045],\n    "zoom": 7\n}\n{{/location}};\n\n// eslint-disable-next-line no-unused-vars\nconst viewOptions = new Promise((resolve, reject) => {\n    resolve( viewConfig );\n});\nmap.setView(viewOptions);\n\n{{#constrainBoundsEnabled }}\nmap.once(\'postrender\', function(event) {   \n    setTimeout(() => {\n        let mapExtent = map.getView().calculateExtent(map.getSize())\n        \n        viewConfig.extent = mapExtent\n        const viewOptions = new Promise((resolve, reject) => {\n            resolve(\n                viewConfig\n            );\n        });\n        map.setView(viewOptions)\n    }, 10);\n});\n{{/constrainBoundsEnabled }}\n\n{{#lsControlEnabled}}\n    enableLsControl()\n{{/lsControlEnabled}}\n\n'},"85ec":function(e,t,n){},9429:function(e){e.exports=JSON.parse('{"title":"My Cool Generated Map!","constrainBoundsEnabled":false,"lsControlEnabled":true,"layers":[{"id":"77d6c119-b1c2-4e50-8a9b-a6ebfdca1777","serviceType":"WMTS","serviceUrl":"https://service.pdok.nl/hwh/luchtfotorgb/wms/v1_0","layerName":"2021_quick_orthoHR","opacity":0.5,"grayscale":1,"layerType":"serviceLayer","title":"Landelijke Voorziening Beeldmateriaal - Luchtfoto 2021 Quick Ortho HR"},{"id":"4f2fc40e-4a06-4c68-accd-877db2d30695","serviceType":"WMTS","serviceUrl":"https://service.pdok.nl/brt/achtergrondkaart/wmts/v2_0","layerName":"standaard","opacity":1,"grayscale":0,"layerType":"serviceLayer","title":"BRT Achtergrondkaart - Standaard"},{"id":"080e6785-fd63-4b5f-828d-030db6da7334","color":[18,39,58],"title":"Featurelaag - Punten","opacity":1,"labels":true,"labelProperty":"benaming","icon":"marker","iconSize":2,"layerType":"featureLayer","source":{"type":"FeatureCollection","crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}},"features":[{"type":"Feature","properties":{"msFID":"102","gid":"102","blad":"000","punt":"305","bladdeel":"","uitgavejaarext":"2017","uitgavevolgext":"2","benaming":"GNSS ref.stat. NLAH Arnhem","ingerekend":"Ja","honum":"11","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"192390","yrd":"442864","gps":"1","afbeelding":""},"geometry":{"type":"Point","coordinates":[5.931350067887865,51.97292932485122]}},{"type":"Feature","properties":{"msFID":"685","gid":"685","blad":"339","punt":"101","bladdeel":"D","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Steen R.D. Imbosch","ingerekend":"Ja","honum":"14","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"196959","yrd":"450163","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/339/339101.jpg"},"geometry":{"type":"Point","coordinates":[5.998735216047266,52.038204244922746]}},{"type":"Feature","properties":{"msFID":"2546","gid":"2546","blad":"339","punt":"313","bladdeel":"D","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Brandtoren Koningsweg Arnhem","ingerekend":"Ja","honum":"12","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"196205","yrd":"450352","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/339/339313.jpg"},"geometry":{"type":"Point","coordinates":[5.987769401824178,52.03995949568482]}},{"type":"Feature","properties":{"msFID":"2563","gid":"2563","blad":"339","punt":"336","bladdeel":"D","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Steen R.D. Rozendaalse veld","ingerekend":"Ja","honum":"13","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"194716","yrd":"451101","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/339/339336.jpg"},"geometry":{"type":"Point","coordinates":[5.966155248525001,52.04680001629989]}},{"type":"Feature","properties":{"msFID":"2565","gid":"2565","blad":"339","punt":"339","bladdeel":"C","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Steen R.D. Oud Reemster Veld","ingerekend":"Ja","honum":"13","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"186434","yrd":"452027","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/339/339339.jpg"},"geometry":{"type":"Point","coordinates":[5.845515449210607,52.05565458880168]}},{"type":"Feature","properties":{"msFID":"2572","gid":"2572","blad":"339","punt":"349","bladdeel":"D","uitgavejaarext":"2013","uitgavevolgext":"2","benaming":"Viaduct Koningsweg Arnhem","ingerekend":"Ja","honum":"13","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"192338","yrd":"450139","gps":"1","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/339/339349.jpg"},"geometry":{"type":"Point","coordinates":[5.93138683934352,52.0383191585834]}},{"type":"Feature","properties":{"msFID":"2575","gid":"2575","blad":"339","punt":"511","bladdeel":"C","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Steen R.D. Kemperheide","ingerekend":"Ja","honum":"14","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"187202","yrd":"450897","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/339/339511.jpg"},"geometry":{"type":"Point","coordinates":[5.856606095635948,52.04545421365497]}},{"type":"Feature","properties":{"msFID":"3174","gid":"3174","blad":"400","punt":"312","bladdeel":"C","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"R.K.K. Oud-Zevenaar","ingerekend":"Ja","honum":"12","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"202871","yrd":"436303","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/400/400312.jpg"},"geometry":{"type":"Point","coordinates":[6.082958939957803,51.91315639956224]}},{"type":"Feature","properties":{"msFID":"3175","gid":"3175","blad":"400","punt":"313","bladdeel":"A","uitgavejaarext":"2002","uitgavevolgext":"3","benaming":"R.K.K. Zevenaar","ingerekend":"Ja","honum":"12","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"202357","yrd":"437737","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/400/400313.jpg"},"geometry":{"type":"Point","coordinates":[6.075686484264615,51.92608879729354]}},{"type":"Feature","properties":{"msFID":"3186","gid":"3186","blad":"400","punt":"324","bladdeel":"A","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"R.K.K. de Steeg","ingerekend":"Ja","honum":"12","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"201242","yrd":"448129","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/400/400324.jpg"},"geometry":{"type":"Point","coordinates":[6.060878859813888,52.01958262341601]}},{"type":"Feature","properties":{"msFID":"3196","gid":"3196","blad":"400","punt":"513","bladdeel":"A","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Zevenaarseweg 6 Angerlo","ingerekend":"Ja","honum":"12","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"203150","yrd":"442871","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/400/400513.jpg"},"geometry":{"type":"Point","coordinates":[6.087934423346049,51.97216337980588]}},{"type":"Feature","properties":{"msFID":"3197","gid":"3197","blad":"400","punt":"518","bladdeel":"A","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Rouvenenstraat 9 Duiven","ingerekend":"Ja","honum":"12","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"201288","yrd":"443178","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/400/400518.jpg"},"geometry":{"type":"Point","coordinates":[6.060879826130615,51.975080944237256]}},{"type":"Feature","properties":{"msFID":"3198","gid":"3198","blad":"400","punt":"519","bladdeel":"A","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Duiker Zevenaarse wetering - A12","ingerekend":"Ja","honum":"12","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"201006","yrd":"440542","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/400/400519.jpg"},"geometry":{"type":"Point","coordinates":[6.056422385625504,51.951412810854954]}},{"type":"Feature","properties":{"msFID":"3199","gid":"3199","blad":"400","punt":"520","bladdeel":"C","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Bruggetje Oud Zevenaar","ingerekend":"Ja","honum":"11","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"201094","yrd":"435691","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/400/400520.jpg"},"geometry":{"type":"Point","coordinates":[6.057051770459049,51.907805994254865]}},{"type":"Feature","properties":{"msFID":"3204","gid":"3204","blad":"409","punt":"204","bladdeel":"C","uitgavejaarext":"2001","uitgavevolgext":"1","benaming":"H.K. Elst","ingerekend":"Ja","honum":"15","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"186782","yrd":"436905","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/409/409204.jpg"},"geometry":{"type":"Point","coordinates":[5.84918642333879,51.9197193139104]}},{"type":"Feature","properties":{"msFID":"3205","gid":"3205","blad":"409","punt":"205","bladdeel":"B","uitgavejaarext":"2001","uitgavevolgext":"1","benaming":"R.K.K. Huissen","ingerekend":"Ja","honum":"13","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"193102","yrd":"438945","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/409/409205.jpg"},"geometry":{"type":"Point","coordinates":[5.941276469721382,51.93765747621559]}},{"type":"Feature","properties":{"msFID":"3206","gid":"3206","blad":"409","punt":"206","bladdeel":"B","uitgavejaarext":"2003","uitgavevolgext":"3","benaming":"R.K.K. Duiven","ingerekend":"Ja","honum":"14","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"198732","yrd":"440287","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/409/409206.jpg"},"geometry":{"type":"Point","coordinates":[6.023313490190779,51.949304583498254]}},{"type":"Feature","properties":{"msFID":"3207","gid":"3207","blad":"409","punt":"207","bladdeel":"B","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"St. Eusebiuskerk Arnhem","ingerekend":"Ja","honum":"14","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"190902","yrd":"443522","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/409/409207.jpg"},"geometry":{"type":"Point","coordinates":[5.909764568422717,51.978941564166554]}},{"type":"Feature","properties":{"msFID":"3208","gid":"3208","blad":"409","punt":"208","bladdeel":"A","uitgavejaarext":"2000","uitgavevolgext":"3","benaming":"Gemeentehuis Oosterbeek","ingerekend":"Ja","honum":"13","beheerinfo":"n.v.t","mutatie":"2","rekendossier":"0","xrd":"186239","yrd":"444567","gps":"0","afbeelding":"https://rdinfo.kadaster.nl/afbeeldingen/409/409208.jpg"},"geometry":{"type":"Point","coordinates":[5.841991010968675,51.988615973577154]}}]}},{"id":"b800d6e1-91eb-4a8c-8096-11c055533f9b","source":"https://service.pdok.nl/kadaster/bestuurlijkegebieden/wfs/v1_0?request=GetFeature&service=WFS&version=2.0.0&outputFormat=application/json&srsname=EPSG:4326&startIndex=0&count=20&typename=bestuurlijkegebieden:Gemeentegebied&bbox=181490.21037169415,426974.7956999999,203370.53037169416,462160.71569999994,EPSG:28992","color":[255,39,58],"width":3,"stroke":[1,6,1,6],"layerType":"featureLayer","labels":false,"labelProperty":"naam","title":"Featurelaag WFS - Polygonen"}],"location":{"x":674103.0693749136,"y":6778624.803135729,"z":11}}')},9635:function(e,t,n){"use strict";n("cb66")},9678:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1da1"),_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("b85c"),_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d4ec"),_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bee2"),_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("262e"),_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2caf"),_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_wrapNativeSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("9072"),_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5530"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("e9c4"),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("2ca0"),core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_string_starts_with_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("2b3d"),core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("9861"),core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("466d"),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_27__),mustache__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("9dbb"),mustache__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(mustache__WEBPACK_IMPORTED_MODULE_28__),ol_Map__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("5eee"),ol_ol_css__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("5bc0"),ol_ol_css__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(ol_ol_css__WEBPACK_IMPORTED_MODULE_30__),ol_layer_Image__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("c810"),ol_source_ImageWMS__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("6792"),ol_layer_Tile__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("480c"),ol_source_WMTS__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("d510"),ol_tilegrid_WMTS__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("6ed8"),ol_proj__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("256f"),ol_extent__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("0af5"),ol_style__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("6c77"),ol_style__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("8682"),ol_style__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("6cbf"),ol_style__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("83a6"),ol_style__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("8295"),ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("a2e1"),ol_source_Vector__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("5831"),ol_layer_Vector__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("3e6b"),ol_format_WKT__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("64d9"),ol_control__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("3900"),raw_loader_assets_templates_index_html_template__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("db98"),raw_loader_assets_templates_script_js_template__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__("8081"),raw_loader_assets_templates_imports_js_template__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__("b56a");__webpack_exports__["a"]={components:{},name:"MapControl",props:{config:Object},data:function(){return{jsTemplate:raw_loader_assets_templates_script_js_template__WEBPACK_IMPORTED_MODULE_49__["a"],htmlTemplate:raw_loader_assets_templates_index_html_template__WEBPACK_IMPORTED_MODULE_48__["a"],importsTemplate:raw_loader_assets_templates_imports_js_template__WEBPACK_IMPORTED_MODULE_50__["a"],map:{}}},mounted:function(){this.config.generator=!0,this.updateMap()},methods:{download:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},getPrepareGenPromises:function(){var e=this,t=[];return this.config.layers.forEach((function(n){"color"in n&&(n.hexColor=e.rgba2hex(n.color)),t.push(e.getFeatureDataAndIcon(n).catch((function(e){console.log(e)})))})),t},generateCode:function(){var e=this,t=this.getPrepareGenPromises();this.config.generator=!1,Promise.all(t).then((function(){e.updateMapTemplate();var t=Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({config:JSON.stringify(e.config),layersString:e.config.layers.map((function(e){return JSON.stringify(e)}))},e.config),n=mustache__WEBPACK_IMPORTED_MODULE_28___default.a.render(raw_loader_assets_templates_script_js_template__WEBPACK_IMPORTED_MODULE_49__["a"],t),r=mustache__WEBPACK_IMPORTED_MODULE_28___default.a.render(raw_loader_assets_templates_index_html_template__WEBPACK_IMPORTED_MODULE_48__["a"],Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({jsCode:n},e.config));e.download("index.html",r)}))},updateMapTemplate:function updateMapTemplate(){var _this4=this,config=this.config,map;config.generator?(this.$refs["map-root"].innerHTML="",map=new ol_Map__WEBPACK_IMPORTED_MODULE_29__["a"]({target:this.$refs["map-root"]})):map=new ol_Map__WEBPACK_IMPORTED_MODULE_29__["a"]({target:"map"});var LocatieServerControl=function(e){Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__["a"])(n,e);var t=Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__["a"])(n);function n(){var e;Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__["a"])(this,n),e=t.call(this);var r=document.createElement("style"),o=document.createElement("template");return e.LS_STYLE="\n       button{\n           border: solid 1px #cfd6e6;\n           border-radius: 0 3px 3px 0;\n           border-left: 0px;\n           width: 3em;\n       }\n       .parentControl{\n           background-color: white;\n           height: 36px;\n       }\n       input{\n           outline: none;\n       }\n       input[type=text]{\n           border: solid 1px #cfd6e6;\n           border-radius: 3px;\n           width: 21em;\n           padding-left: 0.5em;\n       }\n       \n       select{\n           border: solid 1px #cfd6e6;\n           border-radius: 3px;\n           width: 10em;\n           padding-left: 0.5em;    \n       }\n       \n       input[type=checkbox] {\n           transform: scale(1.1);\n       }\n       \n       input:focus{\n           border: solid 2px #cfd6e6 !important;\n       }",e.query="",r.innerHTML="\n           ".concat(e.LS_STYLE,"\n           #locationServerControl{\n               display: flex;\n               position: absolute;\n               bottom: 2em;\n               right: 2em;\n           }\n           @media only screen and (max-width: 1024px) {\n             #locationServerControl{\n               bottom: 3em;\n               left: 0.5em;\n             }\n           }\n         "),o.innerHTML='\n           <div id="locationServerControl" class="parentControl">\n               <input autoComplete="off" id="lsInput" class="control" type="text" placeholder="zoek in locatieserver" title="Zoek in PDOK Locatieserver" list="locatie-auto-complete">\n               <datalist id="locatie-auto-complete"></datalist>\n           </div>\n       ',e.LOCATIE_SERVER_URL="https://geodata.nationaalgeoregister.nl/locatieserver/v3",e.shadow=e.attachShadow({mode:"open"}),e.shadow.appendChild(r),e.shadow.appendChild(o.content.cloneNode(!0)),e.shadow.getElementById("lsInput").addEventListener("input",(function(t){if("insertReplacementText"===t.inputType||void 0===t.inputType){var n,r=e.shadow.getElementById("locatie-auto-complete").querySelectorAll("option"),o="",a=Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_1__["a"])(r);try{for(a.s();!(n=a.n()).done;){var _=n.value;_.value===t.target.value&&(o=_.id)}}catch(s){a.e(s)}finally{a.f()}fetch("".concat(e.LOCATIE_SERVER_URL,"/lookup?id=").concat(o,"&fl=id,geometrie_ll")).then((function(e){return e.json()})).then((function(t){var n=t.response.docs[0].geometrie_ll,r=new ol_format_WKT__WEBPACK_IMPORTED_MODULE_46__["a"],o=r.readFeature(n,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),a=o.getGeometry().getExtent();e.dispatchEvent(new CustomEvent("location-selected",{bubbles:!0,composed:!0,detail:{extent:a,feature:o}})),e.shadow.getElementById("locatie-auto-complete").innerHTML="",e.shadow.getElementById("lsInput").blur()}))}else t.inputType.startsWith("deleteContent")&&""===t.target.value&&e.dispatchEvent(new CustomEvent("location-cleared",{bubbles:!0,composed:!0,detail:{}}))})),e.shadow.getElementById("lsInput").addEventListener("keyup",(function(t){e.query!==t.target.value&&(e.query=t.target.value,fetch("".concat(e.LOCATIE_SERVER_URL,"/suggest?q=").concat(e.query)).then((function(e){return e.json()})).then((function(t){if(t.response.docs.length>0){var n=t.response.docs.map((function(e){return'<option value="'.concat(e.weergavenaam,'" id="').concat(e.id,'">')})),r=n.join("");e.shadow.getElementById("locatie-auto-complete").innerHTML=r}})))})),e}return Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__["a"])(n,[{key:"connectedCallback",value:function(){this.shadow.addEventListener("keydown",(function(e){e.stopPropagation()}))}}]),n}(Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_wrapNativeSuper_js__WEBPACK_IMPORTED_MODULE_6__["a"])(HTMLElement));customElements.get("locatieserver-control")||customElements.define("locatieserver-control",LocatieServerControl);var lsControl=document.createElement("locatieserver-control"),LS_LAYER_ID="lsControlLayer";function removeLsLayer(){var e=map.getLayers().getArray().find((function(e){return"values_"in e&&e.values_.id===LS_LAYER_ID}));e&&map.removeLayer(e)}function locationSelectedHandler(e){var t=polygonStyle({color:[255,255,0],stroke:"solid",width:4}),n=new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_45__["a"]({id:LS_LAYER_ID,declutter:!0,source:new ol_source_Vector__WEBPACK_IMPORTED_MODULE_44__["a"]({features:[e.detail.feature]}),style:new ol_style__WEBPACK_IMPORTED_MODULE_38__["b"](t),opacity:.4,zIndex:9999});removeLsLayer(),map.addLayer(n),map.getView().fit(e.detail.extent,{maxZoom:18,padding:[30,30,30,30]})}function locationClearedHandler(){removeLsLayer()}function enableLsControl(){var e=new ol_control__WEBPACK_IMPORTED_MODULE_47__["a"]({element:lsControl});map.addControl(e),lsControl.addEventListener("location-selected",locationSelectedHandler,!1),lsControl.addEventListener("location-cleared",locationClearedHandler,!1)}function lineStyle(e){var t="rgb(".concat(e.color[0],",").concat(e.color[1],",").concat(e.color[2],")"),n=getDash(e);return{stroke:new ol_style__WEBPACK_IMPORTED_MODULE_39__["a"](Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({},{color:t,width:e.width}),n))}}function pointStyle(e){var t=1.5;"iconSize"in e&&(t=e.iconSize);var n=0,r=e.svgIcon.replace(/<path/g,(function(t){return 2===++n?'<path fill="#'.concat(e.hexColor,'"'):t})),o="data:image/svg+xml;utf8,"+escape(r);return{image:new ol_style__WEBPACK_IMPORTED_MODULE_40__["a"]({opacity:1,src:o,scale:t})}}function getDash(e){var t,n={dashed:{lineDash:[4]},solid:{},dotted:{lineDash:[1,4,1,4]},"dash-dotted":{lineDash:[9,3,3,3]}};return t=Array.isArray(e.stroke)?{lineDash:e.stroke}:e.stroke in n?n[e.stroke]:n["solid"],t}function polygonStyle(e){var t="rgb(".concat(e.color[0],",").concat(e.color[1],",").concat(e.color[2],")"),n="rgba(".concat(e.color[0],",").concat(e.color[1],",").concat(e.color[2],",0.2)");"stroke"in e||(e.stroke="dashed"),"width"in e||(e.width=2);var r=getDash(e);return{stroke:new ol_style__WEBPACK_IMPORTED_MODULE_39__["a"](Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({},{color:t,width:e.width}),r)),fill:new ol_style__WEBPACK_IMPORTED_MODULE_41__["a"]({color:n})}}function getStyle(e){var t={Point:pointStyle,LineString:lineStyle,Polygon:polygonStyle},n=t[e.geomType];return"string"===typeof e.color&&e.color.split(",").length>2&&(e.color=e.color.split(",")),n(e)}function getStyleFunction(e){return function(t,n){var r=getStyle(e);if("labels"in e&&e.labels){var o={Point:{offsetX:7,offsetY:-7,textAlign:"start",overflow:!0},Polygon:{textAlign:"center",overflow:!0},LineString:{offsetX:6,offsetY:-6,textAlign:"start"}},a={text:new ol_style__WEBPACK_IMPORTED_MODULE_42__["a"](Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({},{text:t.get(e.labelProperty),scale:1.3,fill:new ol_style__WEBPACK_IMPORTED_MODULE_41__["a"]({color:"#000000"}),stroke:new ol_style__WEBPACK_IMPORTED_MODULE_39__["a"]({color:"rgba(255, 255, 255, 0.8)",width:3})}),o[e.geomType]))};return new ol_style__WEBPACK_IMPORTED_MODULE_38__["b"](Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({},a),r))}return new ol_style__WEBPACK_IMPORTED_MODULE_38__["b"](r)}}function isValidHttpUrl(e){var t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol}for(var projection=Object(ol_proj__WEBPACK_IMPORTED_MODULE_36__["g"])("EPSG:3857"),projectionExtent=projection.getExtent(),size=Object(ol_extent__WEBPACK_IMPORTED_MODULE_37__["D"])(projectionExtent)/256,resolutions=new Array(19),matrixIds=new Array(19),z=0;z<19;++z)resolutions[z]=size/Math.pow(2,z),matrixIds[z]=z;function getResourceText(e){return _getResourceText.apply(this,arguments)}function _getResourceText(){return _getResourceText=Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(n=e.sent,n.ok){e.next=5;break}throw new Error("HTTP error! status: ".concat(n.status));case 5:return e.next=7,n.text();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),_getResourceText.apply(this,arguments)}function getFeatureData(e){return _getFeatureData.apply(this,arguments)}function _getFeatureData(){return _getFeatureData=Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("featureLayer"!==t.layerType){e.next=12;break}if(!isValidHttpUrl(t.source)){e.next=8;break}return e.next=4,getResourceText(t.source);case 4:r=e.sent,n=JSON.parse(r),e.next=9;break;case 8:n=t.source;case 9:return e.abrupt("return",{ftCollection:n,config:t});case 12:return e.abrupt("return",{serviceUrl:t.serviceUrl,config:t});case 13:case"end":return e.stop()}}),e)}))),_getFeatureData.apply(this,arguments)}function postRender(e){var t=e.target.get("grayscale");e.context.globalCompositeOperation="color","color"===e.context.globalCompositeOperation&&(e.context.fillStyle="rgba(255,255,255,"+t+")",e.context.fillRect(0,0,e.context.canvas.width,e.context.canvas.height)),e.context.globalCompositeOperation="source-over"}var promises=[];config.layersString=config.layers.map((function(e){return JSON.stringify(e)}));var template="\n        {{ #layersString}}\n        promises.push(\n            getFeatureData(\n                {{{.}}}    \n            )\n        )\n        {{/layersString}}",promisesJS=mustache__WEBPACK_IMPORTED_MODULE_28___default.a.render(template,config);eval(promisesJS);var layers=[];Promise.all(promises).then((function(e){var t=0;e.forEach((function(e){console.log("i - ".concat(t)),"featureLayer"===e.config.layerType?(t+=1,layers.push(new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_45__["a"]({zIndex:t,declutter:!0,source:new ol_source_Vector__WEBPACK_IMPORTED_MODULE_44__["a"]({features:new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_43__["a"]({featureProjection:"EPSG:3857"}).readFeatures(e.ftCollection)}),style:getStyleFunction(e.config),opacity:e.config.opacity}))):"serviceLayer"===e.config.layerType&&(t+=1,"WMS"===e.config.serviceType?layers.push(new ol_layer_Image__WEBPACK_IMPORTED_MODULE_31__["a"](Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({zIndex:t,source:new ol_source_ImageWMS__WEBPACK_IMPORTED_MODULE_32__["a"]({url:e.config.serviceUrl,params:{LAYERS:e.config.layerName},ratio:1})},"grayscale"in e.config&&{grayscale:e.config.grayscale}),"opacity"in e.config&&{opacity:e.config.opacity}))):"WMTS"===e.config.serviceType&&(t+=1,layers.push(new ol_layer_Tile__WEBPACK_IMPORTED_MODULE_33__["a"](Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__["a"])({zIndex:t,source:new ol_source_WMTS__WEBPACK_IMPORTED_MODULE_34__["a"]({url:e.config.serviceUrl,layer:e.config.layerName,matrixSet:"EPSG:3857",format:"image/png",projection:projection,tileGrid:new ol_tilegrid_WMTS__WEBPACK_IMPORTED_MODULE_35__["b"]({origin:Object(ol_extent__WEBPACK_IMPORTED_MODULE_37__["B"])(projectionExtent),resolutions:resolutions,matrixIds:matrixIds}),style:"default",wrapX:!0})},"grayscale"in e.config&&{grayscale:e.config.grayscale}),"opacity"in e.config&&{opacity:e.config.opacity})))))})),map.setLayers(layers),map.getLayers().forEach((function(e){var t=e.get("grayscale");t>0&&e.on("postrender",postRender)})),map.render(),config.generator&&(_this4.map=map,_this4.map.on("moveend",(function(){_this4.updateMapState()})))}));var viewConfigTemplate='\n    {{#location}}\n    {\n        "center": [{{ x }}, {{ y }}],\n        "zoom": {{ z }}\n    }\n    {{/location}}\n    {{^location }}\n    {\n        "center": [564457.4160, 6783258.6045],\n        "zoom": 7\n    }\n    {{/location}}',viewConfig=JSON.parse(mustache__WEBPACK_IMPORTED_MODULE_28___default.a.render(viewConfigTemplate,config)),viewOptions=new Promise((function(e,t){e(viewConfig)})),constrainBoundsTemplate="{{#constrainBoundsEnabled }}\n    map.once('postrender', function(event) {   \n        setTimeout(() => {\n            let mapExtent = map.getView().calculateExtent(map.getSize())\n            \n            viewConfig.extent = mapExtent\n            const viewOptions = new Promise((resolve, reject) => {\n                resolve(\n                    viewConfig\n                );\n            });\n            map.setView(viewOptions)\n        }, 10);\n    });\n    {{/constrainBoundsEnabled }}",constrainSet=mustache__WEBPACK_IMPORTED_MODULE_28___default.a.render(constrainBoundsTemplate,config);eval(constrainSet),map.setView(viewOptions),config.lsControlEnabled&&enableLsControl()},updateMap:function(){var e=this;this.config.generator=!0;var t=this.getPrepareGenPromises();Promise.all(t).then((function(){console.log("updateMap"),e.config.layers.map((function(e){return console.log(e.title)})),e.updateMapTemplate()}))},updateMapState:function(){var e=this.map.getView(),t=e.getCenter(),n=parseFloat(t[0].toString()),r=parseFloat(t[1].toString()),o=parseInt(e.getZoom().toString()),a={location:{x:n,y:r,z:o}};Object.assign(this.config,a)},isValidHttpUrl:function(e){var t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol},rgba2hex:function(e){var t=(e&&e[4]||"").trim(),n=(256|e[0]).toString(16).slice(1)+(256|e[1]).toString(16).slice(1)+(256|e[2]).toString(16).slice(1);return""===t&&(t=1),t=(255*t|256).toString(16).slice(1),n+=t,n},getGeometryType:function(e){var t=this;return Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.isValidHttpUrl(e.source)){n.next=7;break}return n.next=3,t.getResourceText(e.source);case 3:o=n.sent,r=JSON.parse(o),n.next=8;break;case 7:r=e.source;case 8:return a=r.features[0].geometry.type,a=a.replace("Multi",""),n.abrupt("return",a);case 11:case"end":return n.stop()}}),n)})))()},getResourceText:function(e){return Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if(n=t.sent,n.ok){t.next=5;break}throw new Error("HTTP error! status: ".concat(n.status));case 5:return t.next=7,n.text();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()},getFeatureDataAndIcon:function(e){var t=this;return Object(_home_runner_work_ol_map_generator_ol_map_generator_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["a"])(regeneratorRuntime.mark((function n(){var r,o,a,_,s,i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("serviceLayer"!==e.layerType){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,new Promise((function(n,r){n(t.getGeometryType(e))}));case 4:if(r=n.sent,e.geomType=r,"Point"!==r){n.next=19;break}return"icon"in e||(e.icon="circle"),o="./icons/".concat(e.icon,".svg"),n.next=11,new Promise((function(e,n){e(t.getResourceText(o))}));case 11:a=n.sent,_=/(<path .*?\/>)/,s=a.match(_),i=s[1],l=i.replace("<path",'<path stroke="#ffffffCC" stroke-width="2px"'),a=a.replace(_,"".concat(l,"$&")),a=a.replace('viewBox="0 0 15 15"','viewBox="-2 -2 19 19"'),e.svgIcon=a.replace(/\n/g,"");case 19:case"end":return n.stop()}}),n)})))()},htmlEncode:function(e){var t=document.createElement("div");return t.innerText=t.textContent=e,e=t.innerHTML,e}}}},b56a:function(e,t,n){"use strict";t["a"]="import { default as ImageLayer } from 'https://esm.run/ol@6.9.0/src/layer/Image';\nimport { default as ImageWMS } from 'https://esm.run/ol@6.9.0/src/source/ImageWMS';\nimport { default as TileLayer } from 'https://esm.run/ol@6.9.0/src/layer/Tile';\nimport { default as WMTS } from 'https://esm.run/ol@6.9.0/src/source/WMTS';\nimport { default as WMTSTileGrid } from 'https://esm.run/ol@6.9.0/src/tilegrid/WMTS';\nimport { get as getProjection } from 'https://esm.run/ol@6.9.0/src/proj';\nimport { getTopLeft, getWidth } from 'https://esm.run/ol@6.9.0/src/extent';\nimport { Circle as CircleStyle, Fill, Stroke, Style, Text, Icon } from 'https://esm.run/ol@6.9.0/src/style';\nimport { default as Map } from 'https://esm.run/ol@6.9.0/src/Map';\nimport GeoJSON from 'https://esm.run/ol@6.9.0/src/format/GeoJSON';\nimport { default as VectorSource } from 'https://esm.run/ol@6.9.0/src/source/Vector';\nimport { default as VectorLayer } from 'https://esm.run/ol@6.9.0/src/layer/Vector';\n"},bca3:function(e,t,n){"use strict";n("5dff")},cb66:function(e,t,n){},db98:function(e,t,n){"use strict";t["a"]='<!DOCTYPE html>\n<html lang="nl">\n    <head>\n        <meta charset="UTF-8">\n        <title>{{ title }}</title>\n        <script type="module">\n            {{{ jsCode }}}\n        <\/script>\n    </head>\n    <body>\n        <div id="map" class="map"></div>\n        {{#title}}\n        <h1 id="mapTitle">{{ title }}</h1>\n        {{/title}}\n        <link href="https://cdn.jsdelivr.net/npm/ol@6.9.0/ol.css" rel="stylesheet">\n        <style>\n            @import url(https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400italic,700);\n            body {\n                margin: unset;\n                font-family: \'Quattrocento Sans\', sans-serif;\n                font-size: 16px;\n            }\n            .map {\n                width: 100vw;\n                height: 100vh;\n                z-index: 0;\n            }\n            #mapTitle {\n                position: absolute;\n                left: 1em;\n                bottom: 1em;\n                background-color: #ffffffba;\n                padding: 0.5em;\n            }\n        </style>\n    </body>\n</html>'},f184:function(e,t,n){"use strict";n("1464")}});
//# sourceMappingURL=app.c764f195.js.map